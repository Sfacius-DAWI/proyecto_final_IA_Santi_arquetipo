---
description: 
globs: *.tsx
alwaysApply: false
---
# Mejores PrÃ¡cticas para React + TypeScript con SWC

## ğŸ¯ VisiÃ³n General

Este conjunto de reglas define las mejores prÃ¡cticas para desarrollar aplicaciones React modernas usando TypeScript y SWC como compilador.

## ğŸš¨ REGLAS CRÃTICAS PARA COMPONENTES

1. DefiniciÃ³n de Componentes
- SIEMPRE usar componentes funcionales
- SIEMPRE definir tipos explÃ­citos para props
- USAR React.FC de manera opcional (preferencia del equipo)

```typescript
// âœ… CORRECTO
interface TodoItemProps {
    id: number;
    text: string;
    completed: boolean;
    onToggle: (id: number) => void;
}

// Con React.FC
const TodoItem: React.FC<TodoItemProps> = ({ id, text, completed, onToggle }) => {
    return (/* ... */);
};

// Sin React.FC (tambiÃ©n vÃ¡lido)
function TodoItem({ id, text, completed, onToggle }: TodoItemProps) {
    return (/* ... */);
}

// âŒ INCORRECTO
const TodoItem = (props) => {
    return (/* ... */);
};
```

2. Hooks Personalizados
- PREFIJO 'use' obligatorio
- TIPOS explÃ­citos para parÃ¡metros y retorno
- DOCUMENTAR efectos secundarios

```typescript
// âœ… CORRECTO
function useLocalStorage<T>(key: string, initialValue: T): [T, (value: T) => void] {
    // implementaciÃ³n...
}

// âŒ INCORRECTO
function localStorageHook(key, initialValue) {
    // implementaciÃ³n...
}
```

## ğŸ“¦ Estructura de Proyecto

1. OrganizaciÃ³n de Archivos
```plaintext
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.test.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â””â”€â”€ Todo/
â”‚   â”‚       â”œâ”€â”€ TodoList.tsx
â”‚   â”‚       â”œâ”€â”€ TodoItem.tsx
â”‚   â”‚       â””â”€â”€ types.ts
â”œâ”€â”€ hooks/
â”œâ”€â”€ utils/
â””â”€â”€ types/
```

2. Importaciones y Exportaciones
- USAR imports con nombre
- EVITAR imports default
- IMPLEMENTAR barrel exports

```typescript
// âœ… CORRECTO
import { Button } from '@/components/common/Button';
import { TodoList } from '@/components/features/Todo';

// âŒ INCORRECTO
import Button from '@/components/common/Button';
```

## ğŸ¨ Estilos y CSS

1. CSS-in-JS o MÃ³dulos CSS
- USAR CSS Modules o styled-components
- TIPOS para props de estilo

```typescript
// âœ… CORRECTO con CSS Modules
import styles from './Button.module.css';

interface ButtonProps {
    variant: 'primary' | 'secondary';
    size: 'small' | 'medium' | 'large';
}

// âœ… CORRECTO con styled-components
import styled from 'styled-components';

const StyledButton = styled.button<ButtonProps>`
    // estilos...
`;
```

## ğŸ”„ Estado y Efectos

1. useState y useEffect
- TIPOS explÃ­citos para estados
- DEPENDENCIAS explÃ­citas en useEffect
- EVITAR any en estados

```typescript
// âœ… CORRECTO
const [todos, setTodos] = useState<Todo[]>([]);

useEffect(() => {
    const fetchTodos = async () => {
        const data = await api.getTodos();
        setTodos(data);
    };
    fetchTodos();
}, []);

// âŒ INCORRECTO
const [todos, setTodos] = useState([]);
```

2. Context API
- SEPARAR Provider y Context
- TIPOS explÃ­citos para valor del contexto

```typescript
// âœ… CORRECTO
interface TodoContextType {
    todos: Todo[];
    addTodo: (text: string) => void;
}

const TodoContext = createContext<TodoContextType | undefined>(undefined);

export function TodoProvider({ children }: { children: React.ReactNode }) {
    // implementaciÃ³n...
}
```

## ğŸ§ª Testing

1. Testing Library
- USAR @testing-library/react
- EVITAR tests basados en implementaciÃ³n
- TIPOS para renders y eventos

```typescript
// âœ… CORRECTO
import { render, screen } from '@testing-library/react';

test('renders todo item', () => {
    const todo: Todo = {
        id: 1,
        text: 'Test todo',
        completed: false
    };
    
    render(<TodoItem {...todo} />);
    expect(screen.getByText('Test todo')).toBeInTheDocument();
});
```

## âš¡ OptimizaciÃ³n con SWC

1. ConfiguraciÃ³n
- HABILITAR minification
- USAR dynamic imports para code splitting

```typescript
// âœ… CORRECTO
const TodoList = dynamic(() => import('./TodoList'), {
    loading: () => <LoadingSpinner />
});

// ConfiguraciÃ³n en next.config.js
const nextConfig = {
    swcMinify: true,
    // otras configuraciones...
};
```

## ğŸ” Control de Tipos

1. Utilidades de Tipos
- USAR utility types de TypeScript
- CREAR tipos reutilizables

```typescript
// âœ… CORRECTO
type TodoFormData = Pick<Todo, 'text' | 'priority'>;
type TodoUpdateData = Partial<Todo>;

// Tipos reutilizables
type LoadingState<T> = {
    data: T | null;
    loading: boolean;
    error: Error | null;
};
```

## ğŸ“ DocumentaciÃ³n

1. Componentes y Hooks
- DOCUMENTAR props con JSDoc
- INCLUIR ejemplos de uso

```typescript
/**
 * Componente TodoItem que representa una tarea individual
 * @param props.id - ID Ãºnico de la tarea
 * @param props.text - Texto de la tarea
 * @param props.completed - Estado de completado
 * @example
 * <TodoItem id={1} text="Completar documentaciÃ³n" completed={false} />
 */
```

## ğŸš« Anti-patrones a Evitar

1. Evitar:
- ANY
- PROP DRILLING excesivo
- EFECTOS innecesarios
- RENDERS innecesarios

```typescript
// âŒ EVITAR
const [state, setState] = useState<any>(); // Usar tipos especÃ­ficos

// âœ… USAR
const [state, setState] = useState<TodoState>({
    items: [],
    loading: false
});
```
```

Este conjunto de reglas proporciona una base sÃ³lida para desarrollar aplicaciones React con TypeScript y SWC. Â¿Hay alguna secciÃ³n especÃ­fica que te gustarÃ­a que expandiera o alguna duda particular?